# 236. Lowest Common Ancestor of a Binary Tree

{% embed url="https://leetcode.com/problems/lowest-common-ancestor-of-a-binary-tree/" %}

Given a binary tree, find the lowest common ancestor (LCA) of two given nodes in the tree.

According to the [definition of LCA on Wikipedia](https://en.wikipedia.org/wiki/Lowest\_common\_ancestor): â€œThe lowest common ancestor is defined between two nodes `p` and `q` as the lowest node in `T` that has both `p` and `q` as descendants (where we allow a node to be a descendant of itself).â€

**Example 1:**

![](https://assets.leetcode.com/uploads/2018/12/14/binarytree.png)

<pre><code><strong>Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 1
</strong><strong>Output: 3
</strong><strong>Explanation: The LCA of nodes 5 and 1 is 3.
</strong></code></pre>

**Example 2:**

![](https://assets.leetcode.com/uploads/2018/12/14/binarytree.png)

<pre><code><strong>Input: root = [3,5,1,6,2,0,8,null,null,7,4], p = 5, q = 4
</strong><strong>Output: 5
</strong><strong>Explanation: The LCA of nodes 5 and 4 is 5, since a node can be a descendant of itself according to the LCA definition.
</strong></code></pre>

**Example 3:**

<pre><code><strong>Input: root = [1,2], p = 1, q = 2
</strong><strong>Output: 1
</strong></code></pre>

**Constraints:**

* The number of nodes in the tree is in the range `[2, 105]`.
* `-109 <= Node.val <= 109`
* All `Node.val` are **unique**.
* `p != q`
* `p` and `q` will exist in the tree.

Related Topics

* Tree
* Depth-First Search
* Binary Tree

\


* ğŸ‘ 13507
* ğŸ‘ 324

## Solution

```python
class Solution:
    def lowestCommonAncestor(self, root: 'TreeNode', p: 'TreeNode', q: 'TreeNode') -> 'TreeNode':
        # 1. parameter: root, p, q, return value: TreeNode
        # 2. ending: root == p || q
        # 3. each level: judge left/right has p/q
        if not root:
            return root
        if root == p or root == q:
            return root
        left = self.lowestCommonAncestor(root.left, p, q)
        right = self.lowestCommonAncestor(root.right, p, q)
        if left and right:
            return root
        if left:
            return left
        if right:
            return right
        return None
```

<img src="../../.gitbook/assets/image.png" alt="" data-size="original">

1. æ±‚æœ€å°å…¬å…±ç¥–å…ˆï¼Œéœ€è¦**ä»åº•å‘ä¸Šéå†**ï¼Œé‚£ä¹ˆäºŒå‰æ ‘ï¼Œåªèƒ½é€šè¿‡**ååºéå†ï¼ˆå³ï¼šå›æº¯ï¼‰**å®ç°ä»åº•å‘ä¸Šçš„éå†æ–¹å¼ã€‚
2. åœ¨å›æº¯çš„è¿‡ç¨‹ä¸­ï¼Œå¿…ç„¶è¦éå†æ•´æ£µäºŒå‰æ ‘ï¼Œå³ä½¿å·²ç»æ‰¾åˆ°ç»“æœäº†ï¼Œä¾ç„¶è¦æŠŠå…¶ä»–èŠ‚ç‚¹éå†å®Œï¼Œå› ä¸ºè¦ä½¿ç”¨é€’å½’å‡½æ•°çš„è¿”å›å€¼ï¼ˆä¹Ÿå°±æ˜¯ä»£ç ä¸­çš„leftå’Œrightï¼‰åšé€»è¾‘åˆ¤æ–­ã€‚
3. è¦ç†è§£å¦‚æœè¿”å›å€¼leftä¸ºç©ºï¼Œrightä¸ä¸ºç©ºä¸ºä»€ä¹ˆè¦è¿”å›rightï¼Œä¸ºä»€ä¹ˆå¯ä»¥ç”¨è¿”å›rightä¼ ç»™ä¸Šä¸€å±‚ç»“æœã€‚
